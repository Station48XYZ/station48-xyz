---
import { Image } from "astro:assets";
import logo from "../assets/logo.png";
import station48 from "../assets/station48.svg";
import { NAV } from "../consts";
---

<header class="bg-block-dirt decoration-[.25em]">
  <div class="bg-block-grass_side bg-block-grass_block_side bg-repeat-x">
    <div
      class="flex flex-col md:flex-row items-center justify-end h-block-5 lg:h-block-3 w-full pb-4 md:pb-0 md:pr-4 bg-gradient-to-t from-black/75 to-black/25"
    >
      <nav class="navbar">
        <a href="/" class="nav-logo">
          <Image
            src={station48}
            alt=""
            class="w-block-2 inline nav-logo-icon"
            width={64}
            height={64}
            loading="eager"
          />
          <Image
            src={logo}
            alt="logo"
            class="w-block-8 inline"
            loading="eager"
            width={1024}
            height={282}
          />
        </a>
        <ul class="nav-menu">
          {
            NAV.map(({ href, text }) => (
              <li class="nav-item">
                <a
                  {href}
                  class="nav-link minecraft-button py-4 px-4 text-lg"
                  target={href.startsWith("http") ? "_blank" : "_self"}
                >
                  {text}
                </a>
              </li>
            ))
          }
        </ul>
        <div class="hamburger minecraft-button py-4 px-4 text-lg">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </div>
      </nav>
    </div>
  </div>

  <script>
    const hamburger = document.querySelector(".hamburger");
    const navMenu = document.querySelector(".nav-menu");
    const navLink = document.querySelectorAll(".nav-link");

    hamburger.addEventListener("click", mobileMenu);
    navLink.forEach((n) => n.addEventListener("click", closeMenu));

    function mobileMenu() {
      hamburger.classList.toggle("active");
      navMenu.classList.toggle("active");
    }

    function closeMenu() {
      hamburger.classList.remove("active");
      navMenu.classList.remove("active");
    }
  </script>

  <style>
    li {
      list-style: none;
    }

    a {
      text-decoration: none;
    }

    .header {
      border-bottom: 1px solid #e2e8f0;
    }

    .navbar {
      display: flex;
      width: 100%;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
    }

    .hamburger {
      display: none;
    }

    .bar {
      display: block;
      width: 25px;
      height: 3px;
      margin: 5px auto;
      -webkit-transition: all 0.3s ease-in-out;
      transition: all 0.3s ease-in-out;
      background-color: #101010;
    }

    .nav-menu {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .nav-logo {
      font-size: 2.1rem;
      font-weight: 500;
      color: #482ff7;
    }

    @media only screen and (max-width: 768px) {
      .nav-menu {
        @apply: bg-block-stone;
        position: fixed;
        left: -100%;
        top: 16rem;
        flex-direction: column;
        width: 100%;
        min-width: 100%;
        height: 100%;
        padding-top: 2rem;
        border-radius: 10px;
        text-align: center;
        transition: 0.3s;
        box-shadow: 0 10px 27px rgba(0, 0, 0, 0.05);
      }

      .nav-item,
      .nav-link {
        width: 100%;
        min-width: 100%;
        display: block;
        padding-left: 1rem;
        padding-right: 1rem;
      }

      .nav-logo-icon {
        display: none;
      }

      .navbar {
        flex-direction: column;
      }

      .nav-menu.active {
        left: 0;
      }

      .hamburger {
        display: block;
        cursor: pointer;
      }

      .hamburger.active .bar:nth-child(2) {
        opacity: 0;
      }

      .hamburger.active .bar:nth-child(1) {
        -webkit-transform: translateY(8px) rotate(45deg);
        transform: translateY(8px) rotate(45deg);
      }

      .hamburger.active .bar:nth-child(3) {
        -webkit-transform: translateY(-8px) rotate(-45deg);
        transform: translateY(-8px) rotate(-45deg);
      }
    }
  </style>
</header>
